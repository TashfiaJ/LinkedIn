{"ast":null,"code":"import _regeneratorRuntime from\"/home/tashfia/Documents/linkedin/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/tashfia/Documents/linkedin/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/tashfia/Documents/linkedin/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Home.js\nimport React,{useState,useContext,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import{AuthContext}from'../../Hooks/AuthContext';// Import your AuthContext\nimport PostList from'../PostList/PostList';// Create a PostList component to display recent posts\nimport\"./PostMain.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){var authContext=useContext(AuthContext);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),content=_useState2[0],setContent=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),imageFile=_useState4[0],setImageFile=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];var handlePostSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var formData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:formData=new FormData();formData.append('username',authContext.username);formData.append('texts',content);if(imageFile){formData.append('image_file',imageFile);}_context.prev=4;_context.next=7;return axios.post('http://post-service:8000/post/create',formData,{headers:{'Content-Type':'multipart/form-data'// Important for file upload\n}});case 7:setContent('');setImageFile(null);alert('Post created successfully!');_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](4);console.error('Error creating post:',_context.t0);alert('An error occurred while creating the post.');case 16:case\"end\":return _context.stop();}},_callee,null,[[4,12]]);}));return function handlePostSubmit(){return _ref.apply(this,arguments);};}();useEffect(function(){// Fetch recent posts using the /getpost endpoint and display them\n// You can create a PostList component for this purpose\n},[]);// Make sure to run this effect only once when the component mounts\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[authContext.isLoggedIn?/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:authContext.logout,children:\"Logout\"}),/*#__PURE__*/_jsx(Link,{to:\"/timeline\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"username-button\",children:[\" \",authContext.username,\" \"]})})]}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"button\",{className:\"login-btn\",children:\"Login/Signup\"})})}),authContext.isLoggedIn&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create a New Post\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-input-container\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:content,onChange:function onChange(e){return setContent(e.target.value);},placeholder:\"Write something...\",rows:\"4\",style:{width:\"70%\"}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setImageFile(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePostSubmit,children:\"Post\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/notification\",children:/*#__PURE__*/_jsx(\"button\",{className:\"notification-icon\",children:\"\\uD83D\\uDD14\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recent Posts\"}),/*#__PURE__*/_jsx(PostList,{})]})]})]})]});}export default Home;","map":{"version":3,"names":["React","useState","useContext","useEffect","axios","Link","AuthContext","PostList","jsx","_jsx","jsxs","_jsxs","Home","authContext","_useState","_useState2","_slicedToArray","content","setContent","_useState3","_useState4","imageFile","setImageFile","_useState5","_useState6","username","setUsername","handlePostSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","wrap","_callee$","_context","prev","next","FormData","append","post","headers","alert","t0","console","error","stop","apply","arguments","children","isLoggedIn","className","onClick","logout","to","value","onChange","e","target","placeholder","rows","style","width","type","files"],"sources":["/home/tashfia/Documents/linkedin/frontend/src/Components/Post/PostMain.js"],"sourcesContent":["// Home.js\nimport React, { useState, useContext, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { AuthContext } from '../../Hooks/AuthContext'; // Import your AuthContext\nimport PostList from '../PostList/PostList';// Create a PostList component to display recent posts\nimport \"./PostMain.css\";\n\nfunction Home() {\n  const authContext = useContext(AuthContext);\n  const [content, setContent] = useState('');\n  const [imageFile, setImageFile] = useState(null);\n  const [username, setUsername] = useState(\"\");\n  \n\n  const handlePostSubmit = async () => {\n    const formData = new FormData();\n    formData.append('username', authContext.username);\n    formData.append('texts', content);\n    if (imageFile) {\n      formData.append('image_file', imageFile);\n    }\n\n    try {\n      await axios.post('http://post-service:8000/post/create', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data', // Important for file upload\n        },\n      });\n\n\n      setContent('');\n      setImageFile(null);\n      alert('Post created successfully!');\n    } catch (error) {\n      console.error('Error creating post:', error);\n      alert('An error occurred while creating the post.');\n    }\n  };\n\n  useEffect(() => {\n    // Fetch recent posts using the /getpost endpoint and display them\n    // You can create a PostList component for this purpose\n  }, []); // Make sure to run this effect only once when the component mounts\n\n  return (\n    <div>\n      {authContext.isLoggedIn ? (\n                <div className=\"user-info\">\n                <button onClick={authContext.logout}>Logout</button>\n                <Link to='/timeline'>\n                <button className=\"username-button\"> {authContext.username} </button>\n                </Link>\n              </div>\n      ) : (\n        <div>\n            <Link to=\"/login\">\n            <button className=\"login-btn\">Login/Signup</button>\n            </Link>\n            </div>\n      )}\n      {authContext.isLoggedIn && (\n      <div>\n      <div className=\"post-section\">\n        <h2>Create a New Post</h2>\n        <div className=\"post-input-container\">\n          <textarea\n            value={content}\n            onChange={(e) => setContent(e.target.value)}\n            placeholder=\"Write something...\"\n            rows=\"4\"\n            style={{ width: \"70%\" }}\n          />\n          <input type=\"file\" onChange={(e) => setImageFile(e.target.files[0])} />\n          <button onClick={handlePostSubmit}>Post</button>\n        </div>\n      </div>\n        <div>\n        <div>\n        <Link to=\"/notification\">\n        <button className=\"notification-icon\">ðŸ””</button>\n      </Link>\n      </div>\n        <div>\n          <h2>Recent Posts</h2>\n          <PostList />\n        </div>\n      </div>\n      </div>\n      )}\n    </div>\n  );\n}\n\nexport default Home;\n"],"mappings":"6YAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAC9D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,WAAW,KAAQ,yBAAyB,CAAE;AACvD,MAAO,CAAAC,QAAQ,KAAM,sBAAsB,CAAC;AAC5C,MAAO,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExB,QAAS,CAAAC,IAAIA,CAAA,CAAG,CACd,GAAM,CAAAC,WAAW,CAAGX,UAAU,CAACI,WAAW,CAAC,CAC3C,IAAAQ,SAAA,CAA8Bb,QAAQ,CAAC,EAAE,CAAC,CAAAc,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAC1B,IAAAI,UAAA,CAAkClB,QAAQ,CAAC,IAAI,CAAC,CAAAmB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAzCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAC9B,IAAAG,UAAA,CAAgCtB,QAAQ,CAAC,EAAE,CAAC,CAAAuB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAG5B,GAAM,CAAAG,gBAAgB,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACjBL,QAAQ,CAAG,GAAI,CAAAM,QAAQ,CAAC,CAAC,CAC/BN,QAAQ,CAACO,MAAM,CAAC,UAAU,CAAE3B,WAAW,CAACY,QAAQ,CAAC,CACjDQ,QAAQ,CAACO,MAAM,CAAC,OAAO,CAAEvB,OAAO,CAAC,CACjC,GAAII,SAAS,CAAE,CACbY,QAAQ,CAACO,MAAM,CAAC,YAAY,CAAEnB,SAAS,CAAC,CAC1C,CAACe,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAGO,CAAAlC,KAAK,CAACqC,IAAI,CAAC,sCAAsC,CAAER,QAAQ,CAAE,CACjES,OAAO,CAAE,CACP,cAAc,CAAE,qBAAuB;AACzC,CACF,CAAC,CAAC,QAGFxB,UAAU,CAAC,EAAE,CAAC,CACdI,YAAY,CAAC,IAAI,CAAC,CAClBqB,KAAK,CAAC,4BAA4B,CAAC,CAACP,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAQ,EAAA,CAAAR,QAAA,aAEpCS,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAAV,QAAA,CAAAQ,EAAO,CAAC,CAC5CD,KAAK,CAAC,4CAA4C,CAAC,CAAC,yBAAAP,QAAA,CAAAW,IAAA,MAAAf,OAAA,iBAEvD,kBAvBK,CAAAL,gBAAgBA,CAAA,SAAAC,IAAA,CAAAoB,KAAA,MAAAC,SAAA,OAuBrB,CAED9C,SAAS,CAAC,UAAM,CACd;AACA;AAAA,CACD,CAAE,EAAE,CAAC,CAAE;AAER,mBACEQ,KAAA,QAAAuC,QAAA,EACGrC,WAAW,CAACsC,UAAU,cACbxC,KAAA,QAAKyC,SAAS,CAAC,WAAW,CAAAF,QAAA,eAC1BzC,IAAA,WAAQ4C,OAAO,CAAExC,WAAW,CAACyC,MAAO,CAAAJ,QAAA,CAAC,QAAM,CAAQ,CAAC,cACpDzC,IAAA,CAACJ,IAAI,EAACkD,EAAE,CAAC,WAAW,CAAAL,QAAA,cACpBvC,KAAA,WAAQyC,SAAS,CAAC,iBAAiB,CAAAF,QAAA,EAAC,GAAC,CAACrC,WAAW,CAACY,QAAQ,CAAC,GAAC,EAAQ,CAAC,CAC/D,CAAC,EACJ,CAAC,cAEZhB,IAAA,QAAAyC,QAAA,cACIzC,IAAA,CAACJ,IAAI,EAACkD,EAAE,CAAC,QAAQ,CAAAL,QAAA,cACjBzC,IAAA,WAAQ2C,SAAS,CAAC,WAAW,CAAAF,QAAA,CAAC,cAAY,CAAQ,CAAC,CAC7C,CAAC,CACF,CACV,CACArC,WAAW,CAACsC,UAAU,eACvBxC,KAAA,QAAAuC,QAAA,eACAvC,KAAA,QAAKyC,SAAS,CAAC,cAAc,CAAAF,QAAA,eAC3BzC,IAAA,OAAAyC,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1BvC,KAAA,QAAKyC,SAAS,CAAC,sBAAsB,CAAAF,QAAA,eACnCzC,IAAA,aACE+C,KAAK,CAAEvC,OAAQ,CACfwC,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAK,CAAAxC,UAAU,CAACwC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,EAAC,CAC5CI,WAAW,CAAC,oBAAoB,CAChCC,IAAI,CAAC,GAAG,CACRC,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAM,CAAE,CACzB,CAAC,cACFtD,IAAA,UAAOuD,IAAI,CAAC,MAAM,CAACP,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAK,CAAApC,YAAY,CAACoC,CAAC,CAACC,MAAM,CAACM,KAAK,CAAC,CAAC,CAAC,CAAC,EAAC,CAAE,CAAC,cACvExD,IAAA,WAAQ4C,OAAO,CAAE1B,gBAAiB,CAAAuB,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC7C,CAAC,EACH,CAAC,cACJvC,KAAA,QAAAuC,QAAA,eACAzC,IAAA,QAAAyC,QAAA,cACAzC,IAAA,CAACJ,IAAI,EAACkD,EAAE,CAAC,eAAe,CAAAL,QAAA,cACxBzC,IAAA,WAAQ2C,SAAS,CAAC,mBAAmB,CAAAF,QAAA,CAAC,cAAE,CAAQ,CAAC,CAC7C,CAAC,CACF,CAAC,cACJvC,KAAA,QAAAuC,QAAA,eACEzC,IAAA,OAAAyC,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBzC,IAAA,CAACF,QAAQ,GAAE,CAAC,EACT,CAAC,EACH,CAAC,EACD,CACJ,EACE,CAAC,CAEV,CAEA,cAAe,CAAAK,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}